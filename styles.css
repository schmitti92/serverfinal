/* Barikade Phase 1 – minimal & stabil */
:root{
  --bg:#0b0e14;
  --panel:#121826;
  --panel2:#0f1422;
  --text:#e7eaf0;
  --muted:#a9b2c3;
  --line:#2a3550;
  --btn:#1b2336;
  --btn2:#24314c;
  --accent:#4da3ff;

  --red:#ff4d6d;
  --green:#2dd4bf;
  --blue:#60a5fa;
  --yellow:#fbbf24;

  --goal:#ffffff;
  --run:#93c5fd;
  --nobar:#a3e635;
  --house:#94a3b8;

  /* board drawing (needed by game.js) */
  --node:#93c5fd;
  --stroke:rgba(0,0,0,0.55);
  --edge:rgba(255,255,255,0.14);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif;
  background: radial-gradient(1200px 800px at 15% 10%, #10182c, var(--bg));
  color:var(--text);
}

.topbar{
  position:sticky; top:0; z-index:10;
  display:flex; gap:5px; align-items:center; justify-content:space-between;
  padding:10px 12px;
  background: rgba(10,13,20,.85);
  border-bottom:1px solid rgba(255,255,255,.06);
  backdrop-filter: blur(10px);
}

.brand{display:flex; gap:10px; align-items:center; min-width:240px}
.logo{
  width:42px;height:42px;border-radius:12px;
  display:grid;place-items:center;
  background: linear-gradient(135deg, rgba(77,163,255,.25), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.10);
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  font-size:20px;
}
.title{font-weight:800; letter-spacing:.2px}
.subtitle{color:var(--muted); font-size:12px}
.subtitle code{color:#c7d2fe}

.controls{display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end}
.btn{
  border:1px solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, var(--btn2), var(--btn));
  color:var(--text);
  padding:10px 12px;
  border-radius:12px;
  cursor:pointer;
  font-weight:700;
}
.btn:hover{filter:brightness(1.05)}
.btn:active{transform:translateY(1px)}
.btn.primary{
  border-color: rgba(77,163,255,.35);
  box-shadow: 0 12px 30px rgba(77,163,255,.12);
}

.diceWrap{
  display:flex; gap:10px; align-items:center;
  padding:6px 10px;
  border-radius:14px;
  background: rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
}
.dice{
  width:44px; height:44px;
  border-radius:14px;
  display:grid; place-items:center;
  font-size:22px; font-weight:900;
  background: radial-gradient(60px 60px at 30% 25%, rgba(255,255,255,.18), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.12);
}
.diceLabel{display:flex; flex-direction:column; gap:2px}
.turnLabel{font-size:13px; color:var(--muted)}
.hint{font-size:12px; color:var(--muted)}

.pill{
  display:inline-block;
  padding:2px 8px;
  border-radius:999px;
  font-weight:800;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
}
.pill.red{color:var(--red)}
.pill.blue{color:var(--blue)}
.pill.green{color:var(--green)}
.pill.yellow{color:var(--yellow)}

.main{
  display:grid;
  grid-template-columns: 1fr 320px;
  gap:5px;
  padding:12px;
}
.stage{
  position:relative;
  background: rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
  border-radius:18px;
  overflow:hidden;
  min-height: 520px;
}
#boardCanvas{width:100%; height: calc(100vh - 86px); display:block}

.legend{
  position:absolute;
  left:12px; bottom:12px;
  padding:10px 12px;
  border-radius:14px;
  background: rgba(10,13,20,.55);
  border:1px solid rgba(255,255,255,.08);
  backdrop-filter: blur(10px);
  font-size:12px;
  color:var(--muted);
  display:flex; flex-direction:column; gap:6px;
}
.legendRow{display:flex; align-items:center; gap:8px}
.dot{width:10px; height:10px; border-radius:999px; display:inline-block}
.dot.goal{background:var(--goal)}
.dot.run{background:var(--run)}
.dot.nobar{background:var(--nobar)}
.dot.house{background:var(--house)}
.dot.piece{background:var(--red)}

.side{
  background: rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
  border-radius:18px;
  padding:12px;
  height: calc(100vh - 86px);
  overflow:auto;
}
.side h2{margin:6px 0 8px; font-size:14px; color:#dbe4ff}
.panel{
  background: rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  padding:10px;
  margin-bottom:12px;
}
.row{display:flex; justify-content:space-between; gap:8px; padding:6px 0; border-bottom:1px solid rgba(255,255,255,.04)}
.row:last-child{border-bottom:none}
.k{color:var(--muted)}
.v{font-weight:800}

.howto{margin:0 0 12px 18px; color:var(--muted)}
.details{
  background: rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  padding:10px;
  margin:0 0 10px;
}
.details summary{cursor:pointer; font-weight:800}
.details ul{margin:8px 0 0 18px; color:var(--muted)}
.mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; color:var(--muted); font-size:12px; line-height:1.4}

@media (max-width: 980px){
  .main{grid-template-columns:1fr; }
  .side{height:auto}
  #boardCanvas{height: 70vh}
}


.dice-low { box-shadow: 0 0 0 rgba(0,0,0,0); }
.dice-mid { box-shadow: 0 0 12px rgba(255,255,255,0.35); }
.dice-high { box-shadow: 0 0 22px rgba(255,215,0,0.75); }
.btn.disabled { opacity: 0.45; cursor: not-allowed; }


/* Active player glow */
.activeTurnGlow{
  box-shadow: 0 0 0 1px rgba(77,163,255,.25), 0 0 30px rgba(77,163,255,.18);
  border-color: rgba(77,163,255,.35) !important;
}
.turnPulse{
  animation: turnPulse 1.4s ease-in-out infinite;
}
@keyframes turnPulse{
  0%{ filter: brightness(1); }
  50%{ filter: brightness(1.18); }
  100%{ filter: brightness(1); }
}



/* ===== 2D Dice with Pips (white, x2 size, mobile-safe) ===== */
.dice.dice2d{
  width:44px;
  height:44px;
  border-radius:14px;
  padding:7px;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap:5px;
  place-items:center;
  user-select:none;
  -webkit-tap-highlight-color: transparent;

  background:#ffffff; /* pure white */
  border:1px solid rgba(0,0,0,.08);
  box-shadow:
    0 16px 34px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.65);
}

/* Hide any old dice text rendering */
.dice.dice2d{ font-size:0 !important; line-height:0 !important; color:transparent !important; }

.dice.dice2d .pip{
  width:8px;
  height:8px;
  border-radius:999px;
  opacity:0;
  transform: scale(0.92);
  background:#000000; /* black pips */
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.18),
    0 2px 6px rgba(0,0,0,0.25);

  display:block;
  align-self:center;
  justify-self:center;
}

/* Positions (3x3 grid) */
.dice.dice2d .p1{ grid-area:1 / 1; }
.dice.dice2d .p2{ grid-area:1 / 2; }
.dice.dice2d .p3{ grid-area:1 / 3; }
.dice.dice2d .p4{ grid-area:2 / 1; }
.dice.dice2d .p5{ grid-area:2 / 2; }
.dice.dice2d .p6{ grid-area:2 / 3; }
.dice.dice2d .p7{ grid-area:3 / 1; }
.dice.dice2d .p8{ grid-area:3 / 2; }
.dice.dice2d .p9{ grid-area:3 / 3; }

/* Pip patterns via data-value (0 = blank) */
.dice2d[data-value="1"] .p5{opacity:1; transform:scale(1);}
.dice2d[data-value="2"] .p1,
.dice2d[data-value="2"] .p9{opacity:1; transform:scale(1);}
.dice2d[data-value="3"] .p1,
.dice2d[data-value="3"] .p5,
.dice2d[data-value="3"] .p9{opacity:1; transform:scale(1);}
.dice2d[data-value="4"] .p1,
.dice2d[data-value="4"] .p3,
.dice2d[data-value="4"] .p7,
.dice2d[data-value="4"] .p9{opacity:1; transform:scale(1);}
.dice2d[data-value="5"] .p1,
.dice2d[data-value="5"] .p3,
.dice2d[data-value="5"] .p5,
.dice2d[data-value="5"] .p7,
.dice2d[data-value="5"] .p9{opacity:1; transform:scale(1);}
.dice2d[data-value="6"] .p1,
.dice2d[data-value="6"] .p3,
.dice2d[data-value="6"] .p4,
.dice2d[data-value="6"] .p6,
.dice2d[data-value="6"] .p7,
.dice2d[data-value="6"] .p9{opacity:1; transform:scale(1);}

/* tiny pop on change */
.dicePop{ animation:dicePop 140ms ease-out; }
@keyframes dicePop{ 0%{ transform:scale(0.97);} 100%{ transform:scale(1);} }

/* ===== Floating overlay while rolling ===== */
.diceOverlay{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
  pointer-events:none;
}
.diceOverlay.show{ display:flex; }

.diceFloat{
  width:660px;
  height:660px;
  border-radius:126px;
  padding:78px;
  gap:54px;
  box-shadow:
    0 34px 85px rgba(0,0,0,.55),
    0 0 0 1px rgba(255,255,255,.10);
  animation:diceEnter 160ms ease-out;
}
.diceFloat .pip{ width:84px; height:84px; display:block; }

@keyframes diceEnter{
  0%{ transform: translateY(10px) scale(0.96); opacity:0; }
  100%{ transform: translateY(0) scale(1); opacity:1; }
}

.diceOverlay.rolling .diceFloat{
  animation: diceEnter 160ms ease-out, diceSpin 3s cubic-bezier(.15,.85,.12,1) forwards;
}
@keyframes diceSpin{
  0%{ transform: scale(1) rotate(0deg); }
  55%{ transform: scale(1.05) rotate(520deg); }
  78%{ transform: scale(1.03) rotate(660deg); }
  100%{ transform: scale(1) rotate(720deg); }
}

/* On small screens, keep header dice reasonable but still big */
@media (max-width: 980px){
  .dice.dice2d{ width:52px; height:52px; border-radius:16px; padding:8px; gap:6px; }
  .dice.dice2d .pip{ width:9px; height:9px; }
}


/* ---- Online UI additions (compatible with Test13 look) ---- */
.app{min-height:100vh; display:flex; flex-direction:column;}
.main{display:grid; grid-template-columns: 1fr 360px; gap:12px; padding:12px; min-height:0;}
.boardWrap{flex:1; border:1px solid rgba(255,255,255,.06); border-radius:16px; background: rgba(18,24,38,.35); overflow:hidden; min-height:0; display:flex;}
.side{display:flex; flex-direction:column; gap:12px; padding-right:12px; min-height:0;}
.card{background: rgba(18,24,38,.55); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:12px;}
.cardTitle{font-weight:800; margin-bottom:8px;}
.kv{display:flex; justify-content:space-between; gap:10px; margin:6px 0; color: var(--muted);}
.kv b{color:var(--text);}
.btn{background: var(--btn); border:1px solid rgba(255,255,255,.10); color:var(--text); padding:10px 12px; border-radius:14px; cursor:pointer;}
.btn:hover{background: var(--btn2);}
.btn:disabled{opacity:.45; cursor:not-allowed;}
.btn.primary{border-color: rgba(77,163,255,.45);}
.topControls{display:flex; gap:10px; align-items:center;}
.turnPill{display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:16px; border:1px solid rgba(255,255,255,.10); background: rgba(18,24,38,.55);}
#turnDot{width:10px;height:10px;border-radius:999px;background:var(--accent);}
#turnText{font-weight:700; font-size:13px; color:var(--text);}

.toast{position:fixed; left:50%; bottom:18px; transform:translateX(-50%); background: rgba(0,0,0,.65); border:1px solid rgba(255,255,255,.10); color:var(--text); padding:10px 12px; border-radius:14px; z-index:50; backdrop-filter: blur(8px); display:none;}
.toast.show{display:block;}

/* inputs */
input,select{background: rgba(15,20,34,.8); border:1px solid rgba(255,255,255,.10); color:var(--text); padding:10px 12px; border-radius:14px; outline:none;}
input:focus{border-color: rgba(77,163,255,.55); box-shadow: 0 0 0 2px rgba(77,163,255,.15);}

/* color picker area (if present) */
.colorRow{display:flex; gap:8px; flex-wrap:wrap;}
.btnColor{padding:8px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background: rgba(27,35,54,.65); color:var(--text); cursor:pointer;}
.btnColor.active{border-color: rgba(77,163,255,.65); box-shadow: 0 0 0 2px rgba(77,163,255,.12) inset;}


/* ===== Dice cube (pips) ===== */
.dicePill{
  width:52px; height:44px;
  display:flex; align-items:center; justify-content:center;
  border-radius:14px;
  background:rgba(0,0,0,0.18);
  border:1px solid rgba(255,255,255,0.08);
}
#diceCube{
  width:30px; height:30px;
  border-radius:8px;
  background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.65));
  border:2px solid rgba(0,0,0,0.35);
  box-shadow: inset 0 2px 4px rgba(255,255,255,0.35), 0 6px 14px rgba(0,0,0,0.35);
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  grid-template-rows:repeat(3, 1fr);
  gap:3px;
  padding:4px;
}
#diceCube[data-face="0"]{ opacity:0.45; }
.dip{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; }
.pip{
  width:6px; height:6px; border-radius:50%;
  background:rgba(0,0,0,0.75);
  box-shadow: inset 0 1px 1px rgba(255,255,255,0.35);
  opacity:0;
}
#diceCube[data-face="1"] .p5 .pip{ opacity:1; }
#diceCube[data-face="2"] .p1 .pip, #diceCube[data-face="2"] .p9 .pip{ opacity:1; }
#diceCube[data-face="3"] .p1 .pip, #diceCube[data-face="3"] .p5 .pip, #diceCube[data-face="3"] .p9 .pip{ opacity:1; }
#diceCube[data-face="4"] .p1 .pip, #diceCube[data-face="4"] .p3 .pip, #diceCube[data-face="4"] .p7 .pip, #diceCube[data-face="4"] .p9 .pip{ opacity:1; }
#diceCube[data-face="5"] .p1 .pip, #diceCube[data-face="5"] .p3 .pip, #diceCube[data-face="5"] .p5 .pip, #diceCube[data-face="5"] .p7 .pip, #diceCube[data-face="5"] .p9 .pip{ opacity:1; }
#diceCube[data-face="6"] .p1 .pip, #diceCube[data-face="6"] .p3 .pip, #diceCube[data-face="6"] .p4 .pip, #diceCube[data-face="6"] .p6 .pip, #diceCube[data-face="6"] .p7 .pip, #diceCube[data-face="6"] .p9 .pip{ opacity:1; }

/* Server assigns colors: hide color picker */
#colorPick{ display:none !important; }

/* ================================
   FINAL FIXES (Canvas + Tablet)
   - stellt sicher, dass #c (Canvas) eine echte Höhe hat
   - bessere Tablet-Bedienung (größere Touch-Flächen, stabile Layout-Höhen)
   ================================ */

.boardWrap{ min-height: 520px; } /* Fallback */
#c{
  width:100%;
  height:100%;
  display:block;
  touch-action:none; /* Pointer-Events sauber für Pan/Zoom */
}

/* Canvas soll die komplette Board-Fläche nutzen */
.boardWrap{ align-items:stretch; }
.boardWrap > canvas{ flex:1; }

/* Tablet/Phone: Side unter das Board, Buttons besser klickbar */
@media (max-width: 980px){
  .topbar{ flex-wrap:wrap; gap:10px; }
  .topControls{ flex-wrap:wrap; gap:10px; }
  .btn{ padding:12px 14px; border-radius:16px; }
  .dicePill{ width:60px; height:52px; border-radius:16px; }
  #diceCube{ width:34px; height:34px; border-radius:10px; }
  .main{ grid-template-columns: 1fr; }
  .boardWrap{ min-height: 68vh; }
  .side{ padding-right:0; }
}

/* Sehr kleine Displays: noch kompakter, aber stabil */
@media (max-width: 420px){
  .brand{ min-width: 0; }
  .subtitle{ display:none; }
  .btn{ padding:11px 12px; }
}
